<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>传令员</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 80px;
            text-align: left;
            overflow-x: hidden;
        }
        /* 缓慢亮解动画（从透明到不透明） */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* 增强蓝色光晕动画（呼吸效果） */
        @keyframes glow {
            0% { filter: drop-shadow(0 0 10px #ADD8E6); }
            50% { filter: drop-shadow(0 0 25px #ADD8E6); }
            100% { filter: drop-shadow(0 0 10px #ADD8E6); }
        }
        .logo {
            width: 200px;
            height: auto;
            margin-bottom: 40px;
            filter: drop-shadow(0 0 10px #ADD8E6);
            cursor: pointer;
            transition: transform 0.2s ease;
            animation: fadeIn 3s ease forwards; /* 3秒缓慢亮解 */
            opacity: 0; /* 初始透明 */
        }
        .logo:hover {
            transform: scale(1.05);
        }
        /* 点击查看按钮：去除边框+增强蓝色光亮度+呼吸光晕 */
        .click-to-view {
            font-size: 16px;
            color: #ADD8E6;
            font-weight: bold;
            cursor: pointer;
            animation: fadeIn 3s ease forwards 0.5s, glow 2s infinite; /* 亮解+呼吸光晕 */
            opacity: 0;
            text-align: center;
            padding: 15px 30px;
            /* 去掉边框 */
            background-color: rgba(0, 0, 0, 0.8);
            /* 增强蓝色光感：扩大阴影范围+提高亮度 */
            box-shadow: 0 0 30px rgba(173, 216, 230, 0.6);
            border-radius: 4px;
            transition: box-shadow 0.3s ease;
        }
        /*  hover时进一步增强光效 */
        .click-to-view:hover {
            box-shadow: 0 0 40px rgba(173, 216, 230, 0.8);
        }
        .command {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 40px;
            max-width: fit-content;
            min-width: 280px;
            padding: 15px;
            border: 2px solid #ADD8E6;
            background-color: rgba(0, 0, 0, 0.8);
            box-shadow: 0 0 20px rgba(173, 216, 230, 0.3);
            cursor: pointer;
            transition: box-shadow 0.2s ease;
            min-height: 80px;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: fadeIn 3s ease forwards; /* 点击后3秒亮解 */
            opacity: 0; /* 初始透明，点击后显示 */
            display: none; /* 初始隐藏 */
        }
        .command:hover {
            box-shadow: 0 0 25px rgba(173, 216, 230, 0.5);
        }
        .command-prefix {
            color: #ADD8E6;
            font-weight: bold;
            flex-shrink: 0;
        }
        .command-content {
            word-wrap: break-word;
        }
        .warning-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.95);
            color: #ADD8E6;
            font-size: 12px;
            padding: 15px 10px;
            text-align: center;
            border-top: 2px solid #ADD8E6;
            box-shadow: 0 -2px 10px rgba(173, 216, 230, 0.5);
            z-index: 9999;
            line-height: 1.5;
            animation: fadeIn 3s ease forwards 1s; /* 延迟1秒亮解 */
            opacity: 0;
        }
        @media (max-width: 767px) and (orientation: portrait) {
            .warning-bar {
                font-size: 10px;
                padding: 12px 8px;
            }
            body {
                padding-bottom: 70px;
            }
            .command {
                font-size: 12px;
                min-height: 70px;
                padding: 12px;
                min-width: 240px;
            }
            .click-to-view {
                font-size: 12px;
                padding: 12px 20px;
                box-shadow: 0 0 20px rgba(173, 216, 230, 0.6);
            }
            .click-to-view:hover {
                box-shadow: 0 0 30px rgba(173, 216, 230, 0.8);
            }
        }
    </style>
</head>
<body>
    <img src="your-logo-image.png" alt="指令标志" class="logo" id="logo">
    <!-- 点击查看容器（初始显示） -->
    <div class="click-to-view" id="clickToView">点击查看</div>
    <!-- 指令容器（初始隐藏） -->
    <div class="command" id="commandDisplay">
        <div class="command-prefix">指令：</div>
        <div class="command-content"></div>
    </div>

    <div class="warning-bar">警告：如未按照指令进行行为，将立刻向你所在的位置派出代行者前去绞杀</div>

    <script>
        let typingTimer = null;
        // Web Audio API 生成BB机“逼逼逼”音效（高频、短促、尖锐）
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        function playTypeSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            // BB机音效核心参数：高频锯齿波（尖锐）、短促时长（30ms）
            oscillator.type = 'sawtooth'; // 锯齿波，比方波更接近BB机的尖锐声
            oscillator.frequency.setValueAtTime(1400, audioContext.currentTime); // 1400Hz高频，模拟“逼”声
            oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.02); // 轻微降频，更自然
            
            // 音量控制：短促爆发，避免刺耳
            gainNode.gain.setValueAtTime(0.15, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.03); // 30ms时长，短促有力
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.03); // 严格控制时长，避免拖尾
            
            // 额外添加一个微弱的回声（可选），增强BB机的复古感
            setTimeout(() => {
                const echoOsc = audioContext.createOscillator();
                const echoGain = audioContext.createGain();
                echoOsc.type = 'sawtooth';
                echoOsc.frequency.setValueAtTime(1000, audioContext.currentTime);
                echoGain.gain.setValueAtTime(0.05, audioContext.currentTime);
                echoGain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.02);
                echoOsc.connect(echoGain);
                echoGain.connect(audioContext.destination);
                echoOsc.start();
                echoOsc.stop(audioContext.currentTime + 0.02);
            }, 20);
        }

        // 生成随机乱码（严格匹配真实指令长度）
        function generateGibberish(length) {
            let gibberish = '';
            // 只生成视觉上更像乱码的字符（符号+大小写字母+数字）
            const gibberishChars = '!@#$%^&*()_+-=[]{}|;:,.<>?`~abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            for (let i = 0; i < length; i++) {
                gibberish += gibberishChars[Math.floor(Math.random() * gibberishChars.length)];
            }
            return gibberish;
        }

        // 乱码转真实指令（确保无残留）
        function typeWriterWithGibberish(el, realText, speed = 80) {
            // 强制清空容器，避免旧内容残留
            el.innerHTML = '';
            // 生成与真实指令长度完全一致的乱码
            const gibberish = generateGibberish(realText.length);
            el.innerHTML = gibberish;
            
            let index = 0;
            if (typingTimer) clearInterval(typingTimer);
            
            typingTimer = setInterval(() => {
                if (index < realText.length) {
                    // 逐字替换乱码为真实字符（精确控制替换位置）
                    el.innerHTML = `${el.innerHTML.substring(0, index)}${realText.charAt(index)}${el.innerHTML.substring(index + 1)}`;
                    playTypeSound(); // 播放BB机音效
                    index++;
                } else {
                    // 关键修复：循环结束后强制赋值真实指令，彻底清除可能的残留
                    el.innerHTML = realText;
                    clearInterval(typingTimer);
                    typingTimer = null;
                }
            }, Math.random() * 40 + speed);
        }

        // ========== 核心修改：拆解原指令为3类片段库 + 随机组合逻辑 ==========
        // 1. 限定前缀库（时长/祈使开头，提取原指令的前缀部分）
        const cmdPrefix = [
            "请在两分钟内", "请在一天内", "在90小时内", "请在一小时内",
            "今天内", "请在睡觉前", "请从", "请在24小时内", "请在30分钟内",
            "请上", "请在4小时内", "用", "--", "请在自己生日当天的凌晨0点00分",
            "...请在", "在大街上", "请在空调房", "打开任意自己最喜欢的游戏，并",
            "找到一首自己最喜欢的哈基米音乐，并", "请在睡着后", "今天",
            "如果你是左撇子，请", "请将", "请在三小时内", "请和一位游戏天才",
            "如你感觉自己被约束，请", "请在晚上9点", "在24小时内",
            "如你是左撇子，请以后", "请在一分钟之内", "点一份外卖，如超时请",
            "煮一碗面，并", "请前往医院，并", "在“冬天”", "在“夏天”",
            "制作一份便当并", "请在晚上", "请在装满热牛奶的泳池里", "…请在",
            "在写作业时", "请在当前或之后看的第1个视频", "和朋友",
            "打开边狱巴士，并", "…在两小时内", "···在今天", "请前往B站为你见到的第1个视频"
        ];
        // 2. 核心动作库（原指令的核心行为，最关键的动作部分）
        const coreAction = [
            "向你最喜欢的女生表白", "捅自己两刀", "v他50", "对着镜子说800遍「我是正常人」",
            "睡够800个小时", "喝一升热牛奶", "开始剧烈运动", "只用右手写字吃饭和扣下扳机",
            "给今天第1个登录的游戏充值任意金额", "找到伴侣", "找到自己感觉舒适的人杀死",
            "把内脏挂在自己家的墙上", "去往任意图书馆拿出一本书", "切断自己的一根拇指",
            "吃掉它", "戴上黑色的面具找到任意人", "对其说苦痛就是我的唯一",
            "睡10分钟醒10分钟重复24小时", "举起一把刀", "刺伤一个熟悉又温暖的身体",
            "拿起剪刀剪断木偶线", "让自己重获自由", "眨三次眼并点一次头",
            "找到任意白色液体并喝掉", "给见到的第1个熟悉的人一拳", "高空跃下",
            "不做一切安全措施", "念完自然常数e之前不要归家", "砍下自己的右脚并吃掉",
            "工作12个小时后立即下班", "点赞", "只给一块钱", "在最痛苦时开怀大笑",
            "听完所有自己最喜欢的音乐", "生病20次", "读完π的所有数",
            "橡皮当笔写完一次作业", "蓄力猛击自己魔丸9178次", "准时祝自己生日快乐",
            "用叉子当筷子吃饭", "找到一只山羊并骑在上面两小时", "盯着镜子里的自己看",
            "直到自己开始不认识自己", "假装自己是明星", "让任意一个人向你寻求签名",
            "练会舞蹈", "假装自己是警察", "对任意一个人说你被逮捕了",
            "买一桶爆米花且数量为56", "模仿中端机", "吹一小时冷气", "玩24小时",
            "假装自己是维特鲁姆人并高空跃下", "将其唱完", "说完26位英文字母",
            "模仿猫咪让猫咪睡床你睡猫窝", "砍掉右手", "不要用左手写字", "喝下一升的人血",
            "买一个盗版的任意东西并以正版价格卖给别人", "写一部小说并让自己出名",
            "cos自己最喜欢的角色", "来到漆黑的下水道并念出痛苦啊你便是我的唯一",
            "站在垃圾桶上享用晚餐", "站在大街上淋一场雨", "假装自己是女人并和一位男生交往",
            "拆散一对同并警告以后不能再这么做", "亲吻见到的第1个女生", "给自己放一次24小时的假",
            "在朋友未察觉的情况下借他200元", "让自己最喜欢的人发现自己最奇怪的性癖",
            "看完自己所有最喜欢的动漫", "学会游泳并前往湖里试炼", "买到免费的鸡蛋",
            "PK并获胜", "心脏跳动500下", "欺骗朋友并让他相信这是真的",
            "向星星许愿并在接下来的两小时内完成愿望", "成为消防员并救助一场火灾",
            "找到自己最喜欢的人并一直表白到其同意", "展示你的后空翻", "主要使用右手",
            "主要使用左手", "把左手装到右手右手装到左手", "找到视频时长为11分45秒的视频",
            "将外卖员殴打一顿", "只吃一半的面条", "死活跟医生说我有病", "开空调",
            "开暖气", "在街道上的任意垃圾桶旁品尝", "晒日光浴", "跳舞并把牛奶全喝了",
            "在白色的墙上看到绿色", "听都市之子并发三条弹幕点赞三连", "聆听自我然后前往你所想前往的地方",
            "将其评论全部看完", "吵架直到朋友不回怼为止", "只用一次通关15牢",
            "刷完一套高考模拟试题", "向你暗恋的人表白并向右跳一下"
        ];
        // 3. 补充要求库（原指令的修饰/限定/补充，让指令更完整）
        const extraReq = [
            "直到她“同意”或者“拒绝”为止", "然后若无其事的走出来", "棕色头发最佳",
            "并且不让任何人发现", "（骨头不用）", "直到自己开始不认识自己",
            "，并只给一块钱", "，之后数星星", "，棕色头发优先", "，无需犹豫",
            "，全程不要说话", "，并拍照留念", "，不许借助任何工具", "，直到完成为止",
            "，且不能被任何人发现", "，动作要自然", "，全程保持面无表情", "，不要被他人察觉"
        ];

        // 随机获取数组中的一个元素
        function getRandomItem(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        // 生成随机组合的指令（4种组合逻辑，贴合原指令风格）
        function generateCommand() {
            const contentEl = document.querySelector('.command-content');
            let finalCmd = '';
            // 随机选择组合方式，保证语句通顺且多样化
            const combineType = Math.floor(Math.random() * 4);
            switch (combineType) {
                case 0:
                    // 组合1：限定前缀 + 核心动作 （最贴合原指令的基础组合）
                    finalCmd = `${getRandomItem(cmdPrefix)}${getRandomItem(coreAction)}`;
                    break;
                case 1:
                    // 组合2：限定前缀 + 核心动作 + 补充要求 （完整长指令，保留原指令的细节）
                    finalCmd = `${getRandomItem(cmdPrefix)}${getRandomItem(coreAction)}${getRandomItem(extraReq)}`;
                    break;
                case 2:
                    // 组合3：核心动作 + 补充要求 （无前置限定，更简洁）
                    finalCmd = `${getRandomItem(coreAction)}${getRandomItem(extraReq)}`;
                    break;
                case 3:
                    // 组合4：纯核心动作 （保留原指令中的短指令风格）
                    finalCmd = getRandomItem(coreAction);
                    break;
            }
            // 保留原有乱码转文字+BB机音效特效
            contentEl.innerHTML = '';
            typeWriterWithGibberish(contentEl, finalCmd);
        }

        // 页面加载初始化
        window.onload = function() {
            const clickToView = document.getElementById('clickToView');
            const commandDisplay = document.getElementById('commandDisplay');

            // 点击“点击查看”触发
            clickToView.addEventListener('click', () => {
                // 隐藏点击查看，显示指令容器
                clickToView.style.display = 'none';
                commandDisplay.style.display = 'flex';
                // 激活音频上下文（浏览器安全限制）
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                // 生成指令（乱码转真实）
                generateCommand();
            });

            // 点击指令容器/LOGO刷新指令
            commandDisplay.addEventListener('click', () => {
                // 刷新时先显示新乱码，再替换
                generateCommand();
            });
            document.getElementById('logo').addEventListener('click', () => {
                clickToView.style.display = 'none';
                commandDisplay.style.display = 'flex';
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                generateCommand();
            });
        }
    </script>
</body>
</html>
